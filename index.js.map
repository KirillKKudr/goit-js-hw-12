{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\nconst API_KEY = '46859410-d5a1b7b8d3c8579cf11d58e8b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport const showNoResultsMessage = () => {\n  iziToast.info({\n    title: 'No Results',\n    message: 'Sorry, there are no images matching your search query. Please try again!'\n  });\n};\n\nexport const showEndOfResultsMessage = () => {\n  iziToast.info({\n    title: 'End of Results',\n    message: \"We're sorry, but you've reached the end of search results.\"\n  });\n};\n\nexport const renderImages = (images, container) => {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n    return `\n      <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" width=\"360\" height=\"200\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-text\"><b>Likes:</b> ${likes}</p>\n          <p class=\"info-text\"><b>Views:</b> ${views}</p>\n          <p class=\"info-text\"><b>Comments:</b> ${comments}</p>\n          <p class=\"info-text\"><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </li>\n    `;\n  }).join('');\n  container.insertAdjacentHTML('beforeend', markup);\n};\n\n\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages, showNoResultsMessage, showEndOfResultsMessage } from './js/render-functions';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector('.search-form');\nconst galleryContainer = document.querySelector('.gallery-list');\nconst loadMoreButton = document.querySelector('.load-more'); \nconst perPage = 15;\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nlet lightbox = new SimpleLightbox('.gallery-list a');\n\nloadMoreButton.style.display = 'none';\n\nconst showLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) loader.classList.add('show');\n};\n\nconst hideLoader = () => {\n  const loader = document.querySelector('.loader');\n  if (loader) loader.classList.remove('show');\n};\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  galleryContainer.innerHTML = '';\n  loadMoreButton.style.display = 'none';\n  currentQuery = event.currentTarget.elements.search.value.trim();\n  currentPage = 1;\n\n  if (currentQuery === '') {\n    showNoResultsMessage();\n    return;\n  }\n\n  await loadImages(); \n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n  await loadImages();\n});\n\nasync function loadImages() {\n  showLoader();\n  try {\n    const { hits, totalHits: fetchedTotalHits } = await fetchImages(currentQuery, currentPage, perPage);\n    hideLoader();\n\n    if (currentPage === 1) totalHits = fetchedTotalHits;\n\n    if (hits.length === 0) {\n      showNoResultsMessage();\n      loadMoreButton.style.display = 'none'; \n    } else {\n      renderImages(hits, galleryContainer);\n      lightbox.refresh();\n\n      \n      if (currentPage > 1) {\n        smoothScroll();\n      }\n\n      if (currentPage * perPage >= totalHits) {\n        loadMoreButton.style.display = 'none';\n        showEndOfResultsMessage();\n      } else {\n        loadMoreButton.style.display = 'block'; \n      }\n    }\n  } catch (error) {\n    hideLoader();\n    console.error('Error processing images:', error);\n    iziToast.error({ title: 'Error', message: 'Failed to load images' });\n  }\n}\n\nfunction smoothScroll() {\n  const cardHeight = document.querySelector('.gallery-item').getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","response","axios","error","showNoResultsMessage","iziToast","showEndOfResultsMessage","renderImages","images","container","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","galleryContainer","loadMoreButton","currentPage","currentQuery","totalHits","lightbox","SimpleLightbox","showLoader","loader","hideLoader","event","loadImages","hits","fetchedTotalHits","smoothScroll","cardHeight"],"mappings":"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"}